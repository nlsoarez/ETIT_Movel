<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal de Produtividade</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Portal de Produtividade</h1>
        <label for="login">Digite seu login:</label>
        <input type="text" id="login" placeholder="Ex: N6071740">
        <button onclick="buscarDados()">Buscar</button>
        
        <div id="resultado" class="hidden">
            <h2>Resultados</h2>
            <table>
                <thead>
                    <tr>
                        <th>Indicador</th>
                        <th>Valor</th>
                    </tr>
                </thead>
                <tbody id="tabelaDados"></tbody>
            </table>
            <p id="analise"></p>
        </div>
    </div>
    
    <script>
        const dadosProdutividade = {
            "N6071740": { "Abertura RAL": 0, "RAL": 0, "REC": 0, "Remedy Móvel": 418, "TOA: 1ª Int.": 0, "NICE: Recebido": 1, "NICE: Atendido": 1, "NICE: Realizado": 11, "Total": 431 },
            "N6173067": { "Abertura RAL": 61, "RAL": 0, "REC": 0, "Remedy Móvel": 1260, "TOA: 1ª Int.": 3, "NICE: Recebido": 3, "NICE: Atendido": 3, "NICE: Realizado": 16, "Total": 1346 },
            "N6172207": { "Abertura RAL": 0, "RAL": 0, "REC": 0, "Remedy Móvel": 1671, "TOA: 1ª Int.": 4, "NICE: Recebido": 1, "NICE: Atendido": 1, "NICE: Realizado": 0, "Total": 1677 },
            "N6104793": { "Abertura RAL": 52, "RAL": 1, "REC": 0, "Remedy Móvel": 880, "TOA: 1ª Int.": 0, "NICE: Recebido": 2, "NICE: Atendido": 0, "NICE: Realizado": 24, "Total": 959 },
            "N5931955": { "Abertura RAL": 0, "RAL": 0, "REC": 0, "Remedy Móvel": 0, "TOA: 1ª Int.": 39, "NICE: Recebido": 0, "NICE: Atendido": 0, "NICE: Realizado": 7, "Total": 46 },
            "F204763": { "Abertura RAL": 0, "RAL": 0, "REC": 0, "Remedy Móvel": 1793, "TOA: 1ª Int.": 5, "NICE: Recebido": 10, "NICE: Atendido": 9, "NICE: Realizado": 28, "Total": 1845 }
        };

        function calcularMediaIndicadores() {
            const totalAnalistas = Object.keys(dadosProdutividade).length;
            const somaIndicadores = {};
            
            Object.values(dadosProdutividade).forEach(dados => {
                Object.keys(dados).forEach(indicador => {
                    if (!somaIndicadores[indicador]) somaIndicadores[indicador] = 0;
                    somaIndicadores[indicador] += dados[indicador];
                });
            });
            
            const mediaIndicadores = {};
            Object.keys(somaIndicadores).forEach(indicador => {
                mediaIndicadores[indicador] = somaIndicadores[indicador] / totalAnalistas;
            });
            
            return mediaIndicadores;
        }

        function buscarDados() {
            const login = document.getElementById("login").value;
            const resultadoDiv = document.getElementById("resultado");
            const tabelaDados = document.getElementById("tabelaDados");
            const analise = document.getElementById("analise");
            
            if (dadosProdutividade[login]) {
                const dados = dadosProdutividade[login];
                const mediaIndicadores = calcularMediaIndicadores();
                let pontosFracos = [];
                
                tabelaDados.innerHTML = "";
                Object.keys(dados).forEach(indicador => {
                    const valor = dados[indicador];
                    const media = mediaIndicadores[indicador];
                    
                    if (valor < media) {
                        pontosFracos.push(`${indicador} (Média: ${media.toFixed(1)})`);
                    }
                    
                    const row = `<tr><td>${indicador}</td><td>${valor}</td></tr>`;
                    tabelaDados.innerHTML += row;
                });
                
                if (pontosFracos.length > 0) {
                    analise.textContent = `Você está abaixo da média nos seguintes pontos: ${pontosFracos.join(", ")}. Foque em melhorá-los.`;
                } else {
                    analise.textContent = "Parabéns! Você está na média ou acima em todos os indicadores.";
                }
                
                resultadoDiv.classList.remove("hidden");
            } else {
                resultadoDiv.classList.add("hidden");
                alert("Login não encontrado!");
            }
        }
    </script>
</body>
</html>
